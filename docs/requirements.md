# 需求文档

## 介绍

拾取筛是一个我的世界1.12.2 Forge模组，为玩家提供智能的掉落物管理功能。该模组允许玩家通过不同模式控制掉落物的拾取和销毁行为，并提供快捷清理功能。

## 术语表

- **拾取筛系统**: 管理掉落物拾取和销毁行为的核心系统
- **掉落物**: 游戏世界中的EntityItem实体
- **匹配掉落物**: 符合当前过滤条件的掉落物
- **拾取范围**: 玩家能够自动拾取掉落物的距离范围
- **区块**: 我的世界中16x16的世界区域单位

## 需求

### 需求 1: 三种工作模式管理

**用户故事:** 作为玩家，我希望能够在三种不同的模式间切换，以便根据不同情况控制掉落物的处理方式。

#### 验收标准

1. 当系统初始化时，拾取筛系统应当提供三种工作模式：销毁匹配掉落物、拾取匹配掉落物、关闭
2. 当玩家切换模式时，拾取筛系统应当立即应用新的模式设置
3. 当模式为关闭时，拾取筛系统应当停止所有自动处理行为

### 需求 2: 销毁匹配掉落物模式

**用户故事:** 作为玩家，我希望能够自动销毁不需要的掉落物，以便保持游戏世界的整洁。

#### 验收标准

1. 当模式设置为销毁匹配掉落物时，拾取筛系统应当持续检测玩家拾取范围内的掉落物
2. 当检测到匹配的掉落物在拾取范围内时，拾取筛系统应当立即销毁该掉落物
3. 当掉落物被销毁时，拾取筛系统应当从世界中移除该实体而不触发拾取事件

### 需求 3: 拾取匹配掉落物模式

**用户故事:** 作为玩家，我希望只拾取我需要的物品，以便避免背包被不需要的物品填满。

#### 验收标准

1. 当模式设置为拾取匹配掉落物时，拾取筛系统应当拦截所有拾取事件
2. 当玩家尝试拾取掉落物时，拾取筛系统应当检查该掉落物是否匹配过滤条件
3. 当掉落物匹配过滤条件时，拾取筛系统应当允许正常拾取
4. 当掉落物不匹配过滤条件时，拾取筛系统应当阻止拾取并保持掉落物在世界中

### 需求 4: 关闭模式

**用户故事:** 作为玩家，我希望能够完全禁用拾取筛功能，以便在需要时恢复原版游戏行为。

#### 验收标准

1. 当模式设置为关闭时，拾取筛系统应当停止所有掉落物检测
2. 当模式为关闭时，拾取筛系统应当允许所有掉落物的正常拾取
3. 当模式为关闭时，拾取筛系统应当不执行任何自动销毁操作

### 需求 5: 快捷键清除功能

**用户故事:** 作为玩家，我希望能够快速清除周围的所有掉落物，以便在掉落物过多时快速清理环境。

#### 验收标准

1. 当系统初始化时，拾取筛系统应当注册K键作为默认清除快捷键
2. 当玩家按下K键时，拾取筛系统应当计算玩家周围2个区块范围内的所有掉落物
3. 当执行清除操作时，拾取筛系统应当移除范围内的所有掉落物实体
4. 当清除操作完成时，拾取筛系统应当向玩家显示"已清除周围掉落物"的提示消息

### 需求 6: 掉落物匹配系统

**用户故事:** 作为玩家，我希望能够配置哪些物品应该被过滤，以便精确控制拾取和销毁行为。

#### 验收标准

1. 当系统初始化时，拾取筛系统应当提供物品过滤配置界面
2. 当玩家配置过滤列表时，拾取筛系统应当保存这些设置
3. 当检查掉落物匹配时，拾取筛系统应当根据配置的过滤条件进行判断
4. 当过滤配置更新时，拾取筛系统应当立即应用新的匹配规则

### 需求 7: 用户界面和反馈

**用户故事:** 作为玩家，我希望能够清楚地了解当前的模式状态和操作结果，以便有效使用该模组。

#### 验收标准

1. 当模式切换时，拾取筛系统应当向玩家显示当前激活的模式
2. 当执行清除操作时，拾取筛系统应当在聊天框中显示操作结果
3. 当系统状态改变时，拾取筛系统应当提供清晰的视觉或文本反馈
4. 当玩家首次使用时，拾取筛系统应当提供基本的使用说明

### 需求 8: Forge模组集成

**用户故事:** 作为玩家，我希望该模组能够与我的世界1.12.2和其他Forge模组良好兼容，以便在现有的游戏环境中使用。

#### 验收标准

1. 当模组加载时，拾取筛系统应当正确注册到Forge事件系统
2. 当处理掉落物时，拾取筛系统应当遵循Forge的事件处理机制
3. 当与其他模组交互时，拾取筛系统应当保持兼容性而不产生冲突
4. 当游戏保存和加载时，拾取筛系统应当正确保存和恢复配置状态